DCC_EncodeString(const src[], dest[], max_size = sizeof dest)
{
	static const s_map[][][] =
	{
		{"¤", "Â¤"},
		{"¦", "Â¦"},
		{"§", "Â§"},
		{"¨", "Â¨"},
		{"©", "Â©"},
		{"«", "Â«"},
		{"¬", "Â¬"},
		{"­", "Â­"},
		{"®", "Â®"},
		{"°", "Â°"},
		{"±", "Â±"},
		{"´", "Â´"},
		{"µ", "Âµ"},
		{"¶", "Â¶"},
		{"·", "Â·"},
		{"¸", "Â¸"},
		{"»", "Â»"},
		{"Á", "Ã"},
		{"Â", "Ã‚"},
		{"Ä", "Ã„"},
		{"Ç", "Ã‡"},
		{"É", "Ã‰"},
		{"Ë", "Ã‹"},
		{"Í", "Ã"},
		{"Î", "ÃŽ"},
		{"Ó", "Ã“"},
		{"Ô", "Ã”"},
		{"Ö", "Ã–"},
		{"×", "Ã—"},
		{"Ú", "Ãš"},
		{"Ü", "Ãœ"},
		{"Ý", "Ã"},
		{"ß", "ÃŸ"},
		{"á", "Ã¡"},
		{"â", "Ã¢"},
		{"ä", "Ã¤"},
		{"ç", "Ã§"},
		{"é", "Ã©"},
		{"ë", "Ã«"},
		{"í", "Ã­"},
		{"î", "Ã®"},
		{"ó", "Ã³"},
		{"ô", "Ã´"},
		{"ö", "Ã¶"},
		{"÷", "Ã·"},
		{"ú", "Ãº"},
		{"ü", "Ã¼"},
		{"ý", "Ã½"},
		{"Ã", "Ä‚"},
		{"ã", "Äƒ"},
		{"¥", "Ä„"},
		{"¹", "Ä…"},
		{"Æ", "Ä†"},
		{"æ", "Ä‡"},
		{"È", "ÄŒ"},
		{"è", "Ä"},
		{"Ï", "ÄŽ"},
		{"ï", "Ä"},
		{"Ð", "Ä"},
		{"ð", "Ä‘"},
		{"Ê", "Ä˜"},
		{"ê", "Ä™"},
		{"Ì", "Äš"},
		{"ì", "Ä›"},
		{"Å", "Ä¹"},
		{"å", "Äº"},
		{"¼", "Ä½"},
		{"¾", "Ä¾"},
		{"£", "Å"},
		{"³", "Å‚"},
		{"Ñ", "Åƒ"},
		{"ñ", "Å„"},
		{"Ò", "Å‡"},
		{"ò", "Åˆ"},
		{"Õ", "Å"},
		{"õ", "Å‘"},
		{"À", "Å”"},
		{"à", "Å•"},
		{"Ø", "Å˜"},
		{"ø", "Å™"},
		{"Œ", "Åš"},
		{"œ", "Å›"},
		{"ª", "Åž"},
		{"º", "ÅŸ"},
		{"Š", "Å "},
		{"š", "Å¡"},
		{"Þ", "Å¢"},
		{"þ", "Å£"},
		{"", "Å¤"},
		{"", "Å¥"},
		{"Ù", "Å®"},
		{"ù", "Å¯"},
		{"Û", "Å°"},
		{"û", "Å±"},
		{"", "Å¹"},
		{"Ÿ", "Åº"},
		{"¯", "Å»"},
		{"¿", "Å¼"},
		{"Ž", "Å½"},
		{"ž", "Å¾"},
		{"¡", "Ë‡"},
		{"¢", "Ë˜"},
		{"ÿ", "Ë™"},
		{"²", "Ë›"},
		{"½", "Ë"},
		{"–", "â€“"},
		{"—", "â€”"},
		{"‘", "â€˜"},
		{"’", "â€™"},
		{"‚", "â€š"},
		{"“", "â€œ"},
		{"”", "â€"},
		{"„", "â€ž"},
		{"†", "â€ "},
		{"‡", "â€¡"},
		{"•", "â€¢"},
		{"…", "â€¦"},
		{"‰", "â€°"},
		{"‹", "â€¹"},
		{"›", "â€º"},
		{"€", "â‚¬"},
		{"™", "â„¢"}
	};

	new const
	    len = strlen(src);

	if(len >= max_size) //not enough minimum space to fit src
	{
		return 0;
	}

	new
		index;

	for(new i, j = strlen(src), bool:done; i < j; i++, done = false)
	{
	    for(new k; k < sizeof(s_map); k++)
	    {
			if(src[i] == s_map[k][0][0])
			{
			    new
			        mapLen = strlen(s_map[k][1]);

				if(index + mapLen >= max_size) //overflow
				{
					dest[0] = 0;
					return 0;
				}

				for(new l; l < mapLen; l++)
				{
					dest[index++] = s_map[k][1][l];
				}
				done = true;
				break;
			}
		}
		if(!done)
		{
			dest[index++] = src[i];
		}
	}
	dest[index] = 0;
	return 1;
}

